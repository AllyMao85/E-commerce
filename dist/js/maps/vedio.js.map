{"version":3,"sources":["vedio.js"],"names":["window","sr","reset","data","scrollTop","isSingnedin","currentPoint","_user","_id","thisVedio","isActive","commentContent","computed","totalTime","children","forEach","child","time","sss","hour","minute","second","isShow","wHeight","innerHeight","document","documentElement","clientHeight","body","hasThisVedio","ownedvedios","indexOf","methods","commentThis","put","send","from","content","vedio","end","err","res","console","error","status","comment","push","Id","studyThisCourse","addToShopCar","shopcar","id","post","update","changePoint","index","payFor","toTop","_timer","setInterval","addr","clearInterval","_throttle","func","_start","that","args","arguments","apply","Date","now","aboutUs","_valiInput","log","username","value","password","email","gender","test","repeat","signup","self","title","html","confirmButtonText","showLoaderOnConfirm","preConfirm","resolve","reject","form","querySelector","elements","then","catch","msg","name","signin","isLogin","Error","user","filters","filDif","diffculty","created","location","search","split","get","query","populate","ResultList","mounted","reveal","addEventListener","e","href","$mount"],"mappings":"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","file":"../vedio.js","sourcesContent":["import Vue from 'vue/dist/vue.js'\nimport ScrollReveal from 'scrollreveal'\nimport swal from 'sweetalert2'\nimport request from 'superagent'\n\nwindow.sr = ScrollReveal({ reset: true })\n\nnew Vue({\n  data () {\n    return {\n      scrollTop: 0,\n      isSingnedin: false,\n      currentPoint: 0,\n      _user: {},\n      _id: '',\n      thisVedio: {},\n      isActive: 0,\n      commentContent: ''\n    }\n  },\n  computed: {\n    totalTime() {\n      let totalTime = 0\n      this.thisVedio.children.forEach(child => {\n        totalTime += (child.time - 0)\n      })\n\n      const sss = totalTime / 1000\n     \n      const hour = Number.parseInt(sss / 60 / 60)\n      const minute = Number.parseInt((sss - hour * 60 * 60) / 60)\n      const second = Number.parseInt(sss - hour * 60 * 60 - minute * 60)\n\n      return `${hour}时${minute}分${second}秒`\n    },\n    isShow() {\n      const wHeight = window.innerHeight\n        || document.documentElement.clientHeight\n        || document.body.clientHeight\n\n      if (this.scrollTop - wHeight >= 0)\n        return true\n\n      return false\n    },\n    hasThisVedio() {\n      if (this._user.ownedvedios.indexOf(this._id) !== -1)\n        return true\n      else\n        return false\n    }\n  },\n  methods: {\n    commentThis() {\n      request.put('/v1/api/comment/comment') \n        .send({\n          from: this._user._id,\n          content: this.commentContent,\n          vedio: this.thisVedio._id\n        })\n        .end((err, res) => {\n          if (err)\n            console.error(err)\n          else {\n            if (res.status === 201) {\n              swal('', '评论成功', 'success')\n              this.thisVedio.comment.push(res.body.Id)\n            }\n          }\n        })\n    },\n    studyThisCourse() {\n      if (this._user.ownedvedios.indexOf(this._id) !== -1)\n        this.isActive = 2\n      else\n        swal('', '请先购买该课程', 'warning')\n    },\n    addToShopCar() {\n      if (this._user.ownedvedios.indexOf(this._id) !== -1) {\n        swal('', '您已购买该视频', 'warning')\n      } else {\n        if (this._user.shopcar.indexOf(this._id) !== -1) {\n          swal('', '您已经添加视频到购物车!', 'warning')\n        } else {\n          let shopcar = []\n          for (let id of this._user.shopcar) {\n            shopcar.push(id)\n          }\n\n          shopcar.push(this._id)\n          request.post('/v1/api/user/users')\n            .send({\n              id: this._user._id,\n              update: {\n                shopcar: shopcar\n              }\n            })\n            .end((err, res) => {\n              if (err)\n                console.error(err)\n              else {\n                if (res.status === 201)\n                  swal('', '添加购物车成功', 'success')\n                  this._user.shopcar = shopcar\n              }\n            })\n        }\n      }\n    },\n    changePoint(index) {\n      this.currentPoint = index  \n    },\n    payFor() {\n      swal('', '请加QQ2080437116, :)', 'success')\n    },\n    toTop() {\n      let _timer = setInterval(function() {\n        const addr = document.body.scrollTop = document.body.scrollTop - 100\n        \n        if (addr <= 0) {\n          clearInterval(_timer)\n        }\n      }, 10)\n    },\n    _throttle(func, _timer = 100) {\n      let _start\n\n      return function() {\n        const that = this\n        const args = arguments\n\n        if (!_start) {\n          func.apply(this, args)\n\n          _start = Date.now()\n        } else {\n          if (Date.now() - _start > _timer) {\n            func.apply(this, args)\n\n            _start = Date.now()\n          }\n        }\n      }\n    },\n    aboutUs() {\n      swal('', 'QQ2080437116 ：）', 'success')\n    },\n    _valiInput(data) {\n      console.log(data.username.value)\n      console.log(data.password.value)\n      console.log(data.email.value)\n      console.log(data.gender.value)\n      if (!/^([a-zA-Z])[\\w\\W]{7,}/.test(data.username.value)) {\n        swal('', '请输入以字母开头，至少为7位的用户名', 'warning')\n        return false\n      }\n\n      if (data.repeat.value !== data.password.value) {\n        swal('', '请确保两次输入密码相同', 'warning')\n        return false\n      }\n\n      if (!/[\\w\\W]{7,}/.test(data.password.value)) {\n        swal('', '请输入至少为7为的密码', 'warning')\n        return false\n      }\n\n      if (!/^[\\w\\W]+@[\\w\\W]+.com$/.test(data.email.value)) {\n        swal('', '请输入正确的邮箱地址', 'warning')\n        return false\n      }\n\n      if (!data.gender.value) {\n        swal('', '请选择性别', 'warning')\n        return false\n      }\n\n      return true\n    },\n    signup() {\n      const self = this\n\n      swal({\n        title: '新账号注册',\n        html:\n          '<form id=\"signup-form\">' +\n            '<input type=\"text\" name=\"username\" class=\"swal2-input\" placeholder=\"用户名\"/>' + \n            '<input type=\"password\" name=\"password\" class=\"swal2-input\" placeholder=\"密码\"/>' + \n            '<input type=\"password\" name=\"repeat\" class=\"swal2-input\" placeholder=\"重复密码\"/>' + \n            '<input type=\"email\" name=\"email\" class=\"swal2-input\" placeholder=\"邮箱\"/>' +\n            '<div class=\"swal2-radio\">' +\n              '<label>' +\n                '<input type=\"radio\" id=\"gender\" name=\"gender\" value=\"0\"/><span>男</span>' +\n              '</label>' +\n              '<label>' +\n                '<input type=\"radio\" name=\"gender\" value=\"1\"/><span>女</span>' +\n              '</label>' +\n              '<label>' +\n                '<input type=\"radio\" name=\"gender\" value=\"2\"/><span>保密</span>' +\n              '</label>' +\n            '</div>' +\n          '</form>',\n        confirmButtonText: '注册',\n        showLoaderOnConfirm: true,\n        preConfirm() {\n          return new Promise((resolve, reject) => {\n            const form = document.querySelector('#signup-form').elements\n\n            if (self._valiInput(form))\n              request.put('/v1/api/user/user')\n                .send({\n                  username: form.username.value,\n                  password: form.password.value,\n                  email: form.email.value,\n                  gender: form.gender.value\n                })\n                .end((err, res) => {\n                  if (err)\n                    console.error(err)\n\n                  else {\n                    if (res.status === 201) {\n                      resolve()\n                    } else {\n                      reject('signup wrong')\n                    }\n                  }\n                })\n            else\n              reject()\n          })\n        }\n      }).then(() => {\n        swal('', '注册成功！:)', 'success')\n      }).catch(msg => {\n        if (msg === 'signup wrong')\n          swal('', '注册失败:(, 请稍后再试', 'wrong')\n      })\n\n      document.querySelector('#gender').name = 'gender'\n    },\n    signin() {\n      const self = this\n\n      swal({\n        title: '用户登录',\n        html:\n          '<form id=\"signup-form\">' +\n            '<input type=\"text\" name=\"username\" class=\"swal2-input\" placeholder=\"用户名/邮箱地址\"/>' + \n            '<input type=\"password\" name=\"password\" class=\"swal2-input\" placeholder=\"密码\"/>' + \n          '</form>',\n        confirmButtonText: '登录',\n        showLoaderOnConfirm: true,\n        preConfirm() {\n          return new Promise((resolve, reject) => {\n            const form = document.querySelector('#signup-form').elements\n\n            request.post('/v1/api/user/login')\n              .send({\n                username: form.username.value,\n                password: form.password.value\n              })\n              .end((err, res) => {\n                if (err)\n                  console.error(err)\n                else {\n                  resolve(res.body)\n                }\n              })\n          })\n        }\n      }).then(body => {\n        if (!body.isLogin)\n          swal('', body.Error, 'error')\n        else {\n          self._user = body.user\n          this.isSingnedin = true\n        }\n      })\n    }\n  },\n  filters: {\n    filDif(diffculty) {\n      switch(diffculty) {\n        case 0:\n          return '初级'\n        case 1:\n          return '中级'\n        case 2:\n          return '高级'\n      }\n    }\n  },\n  created() {\n    this._id = window.location.search.split('?')[1].split('=')[1]\n\n    request.get('/v1/api/vedio/vedio/' + this._id)\n      .query({\n        populate: true\n      })\n      .end((err, res) => {\n        if (err)\n          console.error(err)\n        else {\n          this.thisVedio = res.body.ResultList[0]\n        }\n      })\n  },\n  mounted() {\n    const self = this\n    sr.reveal('.detail')\n\n    window.addEventListener('scroll', this._throttle(function(e) {\n      self.scrollTop = document.body.scrollTop\n    }, 50))\n\n    request.get('/v1/api/user/personal')\n      .end((err, res) => {\n        if (err)\n          console.error(err)\n        else {\n          if (res.body.isLogin) {\n            this._user = res.body.user\n            this.isSingnedin = true\n          } else {\n            swal('', '请先登录', 'error')\n              .then(() => {\n                window.location.href = '/'\n              })\n              .catch(() => {\n                window.location.href = '/'\n              })\n          }\n        }\n      })\n  }\n}).$mount('#root')\n"]}